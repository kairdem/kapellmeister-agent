Kapellmeister agent
===================

Service for automatic deployment new app version

Description
===================
Kapellmeister agent could help you  to update running version of your app. 
You just need to push new docker image to registry and  agent will deploy it and restart container with a new image version

Quick start
===================
To start kapellmeister agent container just run it with:
```
docker run -d
--name kapellmeister-agent \ 
-v /var/run/docker.sock:/var/run/docker.sock \
--restart unless-stopped 
-e KAPELLMEISTER_URL: http://domain.name/api/v1
-e KAPELLMEISTER_KEY: twGRR2IDDbpIUl1OsK4HCbHL7GLOEKNnwDfilqAA 
-e KAPELLMEISTER_PROJECT: project_name 
-e KAPELLMEISTER_CHANNEL: branch_name 
belichberghub/kapellmeister-agent
```
Usage:
===================
```
-e KAPELLMEISTER_URL:
this is  your kapellmeister management server domain name 
-e KAPELLMEISTER_KEY:
place here your read only  authentication token generated by kapellmeister management server
-e KAPELLMEISTER_PROJECT: 
Project name which kapellmeister agent will deploy
-e KAPELLMEISTER_CHANNEL:
Branch name which will be automatically deployed (e.g. develop, test and etc)
``` 
Introduction
===================
Kapellmeister agent is service which will monitor your running docker containers and check for changes images from Dockerhub
or your private docker registry every 5 minutes. 

E.g. you're running kapellmeister agent and container with  postgres:
```
$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
0cb55e9e09ec        postgres            "docker-entrypoint.s…"   3 days ago          Up 3 days           0.0.0.0:5432->5432/tcp   postgres
e3bbc9a7dfd0        belichberghub/kapellmeister-agent      "/usr/local/bin/pyth…"    3 weeks ago         Up 2 hours               kapellmeister-agent
```
When you push new image to docker registry, kapellmeister agent  will deploy it automatically and restart your docker containers which images has been updated.
Also if container run parameters was changed, it will be apllied too.

License
===================

All code found in this repository is licensed under GPL v3
